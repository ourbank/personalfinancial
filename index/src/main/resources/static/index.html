<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
    <META HTTP-EQUIV="pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
    <META HTTP-EQUIV="expires" CONTENT="0">
    <script type="text/javascript" src="js/rem.js"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.transit.js"></script>
    <script type="text/javascript" src="js/jquery.table2excel.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/stomp.min.js"></script>
    <script type="text/javascript" src="js/sockjs.min.js"></script>
	<script type="text/javascript" src="js/DatePicker.js"></script>
   <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/axios.min.js"></script>
    <!-- qs axios-->
    <!-- 引入组件库 -->
    <script src="js/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <!--excel导出相关的包-->
    <script type="text/javascript" src="js/xlsx.full.min.js"></script>
    <script type="text/javascript" src="js/FileSaver.min.js"></script>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/font/iconfont.css">
    <link rel="stylesheet" type="text/css" href="css/iconfont3.css">
    <link rel="stylesheet" href="js/element-ui/lib/theme-chalk/index.css">
    <title>ICBC个金运营管理平台</title>
</head>

<body style="visibility: hidden;overflow: hidden">
<div class="container-flex" id="wholepage" tabindex="0" hidefocus="true">
    <div class="box-left">
        <div class="left-top">
            <div class="current-num">
                <div class="weather-box">
                    <div class="data">
                        <p class="time" id="time">00:00:00</p>
                        <p id="date"></p>
                    </div>
                    <div class="weather">
                        <img id="weatherImg" src="images/weather/weather_img01.png" alt="">
                        <div id="weather">
                            <p class="active">多云</p>
                            <p>25-31℃</p>
                            <p>广州市天河区</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="left-center">
            <div class="title-box">
                <h6 id="title1" title="点击进入详情页">业务指标分析</h6>
                <img class="line-img" src="images/line-blue.png" alt="">
                <button id="filBtn"><img src="images/select_icon.png" alt="">定制</button>
            </div>
            <div class="chart-box">
                <div class="filter-con" id="filCon" data-type="1">
                    <div class="select" tabindex="0" hidefocus="true">

                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div id="analyli1_1" class="select-div">业务指标</div>
                        <ul class="select-ul" id="select_business">
                            <li data-value="0">开卡数</li>
                            <li data-value="1">贷款数</li>
                            <li data-value="2">存款数</li>
                            <li data-value="3">中间收入</li>
                        </ul>
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div id="analyli1_2" class="select-div">分析指标</div>
                        <ul class="select-ul" id="select_factor">
                            <li data-value="0">职业</li>
                            <li data-value="1">年龄</li>
                            <li data-value="2">住址</li>
                            <li data-value="3">性别</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="chart-box pie-chart">
                <div id="pie"></div>
                <!--                <div>-->
                <!--                    <div class="pie-data">-->
                <!--                    </div>-->
                <!--                </div>-->
            </div>
        </div>
        <div class="left-bottom" class="select">
            <div class="title-box">
                <h6 style="cursor:pointer;" id="title2">业务指标预测</h6>
                <img class="line-img" src="images/line-blue.png" alt="">
                <button id="fil1Btn"><img src="images/select_icon.png" alt="">筛选</button>
            </div>
            <div class="chart-box">
                <div class="filter-con" id="fil1Con" data-type="1">
                    <div class="select" tabindex="0" hidefocus="true">
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                    </div>
                    <div class="select" tabindex="0" hidefocus="true">
                        <div id="analyli2_1" class="select-div">预测指标</div>
                        <ul class="select-ul" id="pre_select_business">
                            <li data-value="1">开卡数</li>
                            <li data-value="2">贷款数</li>
                            <li data-value="3">存款数</li>
                            <li data-value="4">中间收入</li>
                        </ul>
                    </div>
                </div>
                <div id="prechart" class="gd-map" style="width:100%;height: 280px;">
                </div>
            </div>
        </div>
    </div>
    <div class="box-center">
        <div class="center-top">
            <h1>ICBC个金运营管理平台</h1>
        </div>
        <div class="center-center">
            <div class="select-box-map">
                <div id="tobigmap" class="main_title">
                    <img style="width:0.3rem;height:0.3rem;" src="images/location.png" alt="">
                    地点选择
                </div>
                <div id="gdMap" class="gd-map">
                </div>
            </div>
            <div class="select-box-map1">
                <div class="main_title">
                    <img style="width:0.3rem;height:0.3rem;" src="images/spreadsheet.png" alt="">
                    业务选择
                </div>
                <div id="Jcardnum" class="t_mbox">
                    <i style="background: url(./images/bankcard.png) no-repeat;background-size: 100% 100%;width:0.7rem;height:0.7rem;left:0.65rem"></i>
                    <span>开卡数</span>
                    <h2></h2>
                </div>
                <div id="Jloan" class="t_mbox">
                    <i style="background: url(./images/vip.png) no-repeat;background-size: 100% 100%;"></i>
                    <span>贷款数</span>
                    <h2></h2>
                </div>
                <div id="Jcash" class="t_mbox">
                    <i style="background: url(./images/consumption.png) no-repeat;background-size: 100% 100%;"></i>
                    <span>存款数</span>
                    <h2></h2>
                </div>
                <div id="Jmiddle" class="t_mbox">
                    <i style="background: url(./images/indent.png) no-repeat;background-size: 100% 100%;"></i>
                    <span>中间收入</span>
                    <h2></h2>
                </div>
            </div>
            <div class="select-box-map2">
                <div class="select-box-map2_1">
                    <div class="main_title">
                        <img style="width:0.3rem;height:0.3rem;" src="images/time.png" alt="">
                        时间选择
                    </div>

                    <div class="time-box" id="timeBox">
                        <div class="time-div">
                            <input class="time-input" type="text" value="开始时间" id="startTime">
                            <img src="images/selsct_time.png" alt="">
                        </div>
                        <div class="time-div end">
                            <input class="time-input" type="text" value="结束时间" id="endTime">
                            <img src="images/selsct_time.png" alt="">
                        </div>
                    </div>
                </div>
				<div class="pages-div" >
                    <button id="commit" class="skip2" >开始查询</button>
				</div>
                <div class="select-box-map2_2" >
                    <div id='tohistory' class="main_title" style="cursor:pointer">
                        <img style="width:0.3rem;height:0.3rem;" src="images/time.png" alt="">
                        推荐
                    </div>
                    <div style="height:90%;" id="vueRecommand">
                        <el-scrollbar style="height:100%">
                            <div class="historydata-box" v-for="rec in recdata">
                                <p class="historydata" id='historydata1'>{{rec.title}}</p>
                            </div>
                        </el-scrollbar>
                    </div>

                    <style>
                        .el-scrollbar__wrap {
                            overflow-x: hidden;
                        }
                    </style>
                </div>
            </div>
        </div>
        <div class="center-bottom">
            <div class="chart-box">
                <div id="chart4Text">

                </div>
                <div id="chart4" style="width:100%;height:95%;"></div>
            </div>
        </div>
    </div>
</div>

<div id="main_hover">
    <img src="images/navigate-left.png">
</div>

<div id="right_float_window">
    <div id="his-save" class="float_window_icon" title="导出报表">
        <img src="images/export.png">
    </div>
    <div class="float_window_icon" title="其他">
        <img src="images/door.png">
    </div>

</div>


<div class="container">
    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">业务指标分析</h2>
        <div id="bigchart1" class="analy-pop" style="width:30%;height:40%;
        right:70%;top:10%  "></div>
        <div class="chart-box pie-chart">
            <div class="pie"></div>
            <div>
                <div class="pie-data1" id="pie1" style="left:-60%;top:5%">
                </div>
            </div>
        </div>

        <div id="bigchart2" class="analy-pop" style="width:30%;height:40%;
        right:25%;top:10%  "></div>
        <div class="chart-box pie-chart">
            <div class="pie"></div>
            <div>
                <div class="pie-data1" id="pie2" style="left:55%;top:5%">

                </div>
            </div>
        </div>

        <div id="bigchart3" class="analy-pop" style="width:30%;height:40%;
        right:70%;top:50%  "></div>
        <div class="chart-box pie-chart">
            <div class="pie"></div>
            <div>
                <div class="pie-data1" id="pie3" style="left:-60%;top:57%">

                </div>
            </div>
        </div>

        <div id="bigchart4" class="analy-pop" style="width:30%;height:40%;
        right:25%;top:50%  "></div>
        <div class="chart-box pie-chart">
            <div class="pie"></div>
            <div>
                <div class="pie-data1" id="pie4" style="left:55%;top:50%">

                </div>
            </div>
        </div>
    </div>

    <div class="pop-up pre-pop-up">
        <span class="close-pop"></span>
        <h2 id="big_title2" class="title">业务预测分析</h2>
        <div class="pre-navigation">
            <div class="float_window_icon" id='pre_plan_btn' title="配置计划">
                <img src="images/config.png">
            </div>
            <div class="float_window_icon" id='pre_chart_btn' title="预测图表">
                <img src="images/line_chart.png">
            </div>
        </div>
        <div class="pre-left">
            <div class="pre-left-top">
                <div class="pages-div" class="mineus">
                </div>
            </div>
            <div class="pre-left-bottom">
                <div id="chart11" style="width:100%;height: 100%;"></div>
            </div>
        </div>

        <div class="pre-right2">
            <div class="pages-div" class="mineus">
                <p><span>警报情况</span></p>
            </div>
            <div id="gdMap_alert" class="gd-map">
            </div>
        </div>
    </div>

    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">查询历史</h2>
        <div class="history-left">
            <div class="history-left-top">
                <table class="table3">
                    <thead>
                    <tr>
                        <th>操作时间</th>
                        <th>操作类型</th>
                        <th>时间</th>
                        <th>地点</th>
                        <th>业务</th>
                    </tr>
                    </thead>
                    <tbody id="tList">
                    <tr>
                        <td>2019-06-19 17:52</td>
                        <td>查询</td>
                        <td>2019-06-15 16:00</td>
                        <td>广州</td>
                        <td>开卡数</td>
                    </tr>
                    <tr>
                        <td>2019-06-19 17:52</td>
                        <td>查询</td>
                        <td>2019-06-15 16:00</td>
                        <td>广州</td>
                        <td>开卡数</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="history-left-bottom">
                <div class="pages-div" class="mineus">
                    <button class="skip savehistory">另存为</button>
                </div>
            </div>
        </div>
        <div class="history-right">
            <div id="historychat"></div>
        </div>
    </div>

    <div class="pop-up">
        <span class="close-pop"></span>
        <h2 class="title">地图详情</h2>
        <div class="map-center">
            <div id="gdMap_big"></div>
        </div>
    </div>

    <div class="pop-up pre-pop-up">
        <span class="close-pop"></span>
        <h2 class="title" id='big_title_plan'>计划配置</h2>
        <div class="pre-navigation">
            <div class="float_window_icon" id='plan_plan_btn' title="配置计划">
                <img src="images/config.png">
            </div>
            <div class="float_window_icon" id='plan_chart_btn' title="预测图表">
                <img src="images/line_chart.png">
            </div>
        </div>
        <div class="pre-right1">
            <div class="pages-div" class="mineus">
                <button id="1mon" class="skip">月</button>
                <button id="3mon" class="skip">季度</button>
                <button id="12mon" class="skip">年</button>
                <p><span style="cursor:pointer" id="gz_click">广州分行：</span></p>
                <input id="广州target">
                <button id="pre_all_btn" class="skip2">智能分配</button>
                <button id="pre_ana_btn" class="skip2">分析</button>
            </div>
            <div class="city-container">
            </div>
        </div>
    </div>

    <div class="pop-up ana-pop-up">
        <span class="close-pop"></span>
        <h2 id="ana_title" class="title">业务指标分析</h2>
<!--        <div class="pre-navigation">-->
<!--            <div class="float_window_icon" id='ana_config_btn' title="配置分析项">-->
<!--                <img src="images/addconfig.png">-->
<!--            </div>-->
<!--            <div class="float_window_icon" id='ana_chart_btn' title="分析图表">-->
<!--                <img src="images/infographic.png">-->
<!--            </div>-->
<!--        </div>-->
        <div class='ana_main' id='ana_config_page'>
<!--            <input id="test_color">-->
<!--            <button id="ana_test">新增一个图表</button>-->
            <div class="GM_banner w">
                <div class="GM_nav">
                    <div class="GM_selector" id="appdate1">
                        <div  class="title">
                            <div class="flex">
                                <h3 ><a href="#" id="zhexianV" class="iconfont icon-tubiaozhexiantu" @click="aclick($event)"></a></h3>
                                <h3><a href="#" id="biaogeV" class="iconfont icon-biaoge" @click="aclick($event)" ></a></h3>
                                <h3><a href="#" id="zhuzhuangV" class="iconfont icon-zhuzhuangtu" @click="aclick($event)"></a></h3>
                                <h3><a href="#" id="binV" class="iconfont icon-bingtu" @click="aclick($event)"></a></h3>
                                <h3><a href="#" class="iconfont icon-hengxiangzhuzhuangtu"></a></h3>
                                <h3><a href="#" class="iconfont icon-duibibitiaoxingtu"></a></h3>
                                <h3><a href="#" class="iconfont icon-fsux_tubiao_duibitu"></a></h3>
                                <h3><a href="#" class="iconfont icon-relitu"></a></h3>
                                <h3><a href="#" class="iconfont icon-leidatu"></a></h3>
                            </div>
                        </div>
                        <!--手机商品筛选-->
                        <div id="biaogeView">
                            <el-select v-model="value2" placeholder="选择业务包" @change="chooseSelectChange">
                                <el-option
                                        v-for="item in options"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                </el-option>
                            </el-select>

                            <div >
                                <el-row>
                                    <el-col :span="8">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>行表头</span>
                                                <!--<el-button style="float: right; padding: 3px 0" type="text" @click="testVisible = true">操作按钮</el-button>-->
                                            </div>
                                            <!--<div  class="text item">-->
                                            <!--存储数-->
                                            <!--</div>-->
                                            <el-checkbox-group v-model="checkList">
                                                <el-checkbox class="text item" label="银行分支" checked="true"></el-checkbox><br/>
                                            </el-checkbox-group>
                                        </el-card>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>指标</span>
                                                <el-button style="float: right; padding: 3px 0" type="text"  @click="clicktianjia()">添加计算指标</el-button>
                                            </div>
                                            <div>
                                                <el-dialog title="计算指标" :visible.sync="dialogFormVisible">
                                                    <el-dialog
                                                            width="30%"
                                                            title="内层 Dialog"
                                                            :visible.sync="innerVisible"
                                                            append-to-body>
                                                        <div class="block">
                                                            <span class="demonstration">时间范围： </span>
                                                            <el-date-picker
                                                                    v-model="value6"
                                                                    type="daterange"
                                                                    range-separator="至"
                                                                    start-placeholder="开始日期"
                                                                    end-placeholder="结束日期"
                                                                    @change="addcxDate"
                                                                    value-format="yyyy-MM-dd">
                                                            </el-date-picker>
                                                        </div>
                                                        <div slot="footer" class="dialog-footer">
                                                            <el-button @click="innerquxiao()">取 消</el-button>
                                                            <el-button type="primary" @click="addcxDate()">确 定</el-button>
                                                        </div>
                                                    </el-dialog>
                                                    <el-form :model="form">
                                                        <el-form-item label="指标名" :label-width="formLabelWidth">
                                                            <el-input v-model="form.name" auto-complete="off"></el-input>
                                                        </el-form-item>
                                                        <el-form-item label="计算方式" :label-width="formLabelWidth">
                                                            <el-select v-model="form.region" placeholder="选择指标生成方式" @change="zbWaysChange">
                                                                <el-option label="查询" value="chaxun" ></el-option>
                                                                <el-option label="公式" value="gongshi"></el-option>
                                                            </el-select>
                                                        </el-form-item>
                                                    </el-form>


                                                    <!-- ------------------公式部分----------------->
                                                    <div id="gongshiDiv" style="display:none;">
                                                        <el-row>
                                                            <el-col :span="8" >
                                                                <div id="gsDivL" class="grid-content bg-purple-light">
                                                                    <el-collapse  style="opacity: 0.5"><!--@node-click="handleNodeClick" -->
                                                                        <el-tree :data="treedata" :props="defaultProps"  @node-click="getTreeChecked" ></el-tree>
                                                                    </el-collapse>
                                                                </div>
                                                            </el-col>
                                                            <el-col :span="16">
                                                                <div >
                                                                    <el-row>
                                                                        <el-col>
                                                                            <div  id="gsDiv1" class="grid-content bg-purple"  contenteditable="true" >
                                                                   <span  v-for="sp in spanList" >
                                                                       <span v-if="sp.fuhao==='no'" role="presentation" class="textspan"  contenteditable="false">{{sp.label}}</span>
                                                                       <span v-else role="presentation"  contenteditable="false">{{sp.label}}</span>
                                                                   </span>

                                                                                <!--<div>-->
                                                                                <!--<span role="presentation" class="textspan"  contenteditable="false">存储率</span>-->
                                                                                <!--</div>-->
                                                                            </div>
                                                                        </el-col>
                                                                    </el-row>

                                                                    <el-row>
                                                                        <el-col><div class="grid-content bg-purple-light">
                                                                            <i class="iconfont icon-plus-add" @click="iclick($event)"  id="+"></i>
                                                                            <i class="iconfont icon-plus-minus" @click="iclick($event)"  id="-"></i>
                                                                            <i class="iconfont icon-chenghao" @click="iclick($event)" id="*"></i>
                                                                            <i class="iconfont icon-chuhao" @click="iclick($event)" id="/"></i>
                                                                            <i class="iconfont icon-zuokuohao1" @click="iclick($event)" id="("></i>
                                                                            <i class="iconfont icon-youkuohao1" @click="iclick($event)" id=")"></i>
                                                                        </div></el-col>
                                                                    </el-row>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </div>
                                                    <!-- ------------------公式部分----------------->


                                                    <div slot="footer" class="dialog-footer">
                                                        <el-button @click="quxiao()">取 消</el-button>
                                                        <el-button type="primary" @click="add()">确 定</el-button>
                                                    </div>
                                                </el-dialog>
                                            </div>
                                            <el-checkbox-group v-model="checkList">
                                                <div id="vmcbox">
                                                    <div v-for="zhibiao in zblist">
                                                        <el-checkbox class="text item"  :label="zhibiao.label" checked="true"></el-checkbox><br/>
                                                    </div>
                                                </div>
                                            </el-checkbox-group>
                                        </el-card>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>结果过滤器</span>
                                                <!--<el-button style="float: right; padding: 3px 0" type="text" @click="testVisible = true">操作按钮</el-button>-->
                                            </div>
                                            <el-table :data="zblist" :show-header="false">
                                                <el-table-column
                                                        type="selection"
                                                        width="55">
                                                </el-table-column>
                                                <el-table-column  property="label" label="指标"></el-table-column>
                                                <el-table-column >
                                                    <template slot-scope="scope">
                                                        <el-popover
                                                                ref="popover1"
                                                                placement="top-start"
                                                                width="200"
                                                                trigger="click">
                                                            <el-table :data="jgshaixuanList" :show-header="false" >
                                                                <el-table-column  property="jgshaixuan" label="想要的结果筛选"></el-table-column>
                                                                <el-table-column >
                                                                    <template>
                                                                        <el-popover
                                                                                ref="popover2"
                                                                                placement="top-start"
                                                                                width="200"
                                                                                trigger="hover">
                                                                            <el-table :data="hzfangshiList" :row-class-name="tableRowClassName"  @row-click="rowClick()" :show-header="false">
                                                                                <el-table-column property="hzfangshi" label="汇总方式"></el-table-column>
                                                                            </el-table>
                                                                        </el-popover>
                                                                        <el-button
                                                                                v-if=""
                                                                                type="text"
                                                                                v-popover:popover2 ><i class="el-icon-caret-bottom"></i></el-button>
                                                                    </template>
                                                                </el-table-column>
                                                            </el-table>
                                                        </el-popover>
                                                        <el-button
                                                                type="text"
                                                                v-popover:popover1 ><i class="el-icon-caret-bottom"></i></el-button>
                                                    </template>
                                                </el-table-column>
                                            </el-table>
                                        </el-card>
                                    </el-col>
                                </el-row>

                            </div>

                            <!-- 表格部分-->
                            <template>
                                <div  id="table1" style="display: ''">
                                    <!-- :header-cell-style="{background:'#0c1c2a',color:'#526cdf'}"-->
                                    <!-- :cell-style="{background:'#0c1c2a',color:'#2e74f1'}"-->
                                    <el-table
                                            :data="tableData4.slice((currentPage-1)*pageSize,currentPage*pageSize)"
                                            border
                                            style="width: 100%"
                                            max-height="250">
                                        <el-table-column
                                                prop="bankName"
                                                label="银行分支"
                                                width="300">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb1"
                                                label="今日存款金额">
                                        </el-table-column>
<!--                                        <el-table-column-->
<!--                                                prop="zb2"-->
<!--                                                label="昨日存款金额">-->
<!--                                        </el-table-column>-->
<!--                                        <el-table-column-->
<!--                                                prop="zb3"-->
<!--                                                label="比昨日（%）">-->
<!--                                        </el-table-column>-->
                                        <el-table-column
                                                fixed="right"
                                                label="操作"
                                                width="120">
                                            <template slot-scope="scope">
                                                <el-button
                                                        @click.native.prevent="deleteRow(scope.$index, tableData4)"
                                                        type="text"
                                                        size="small">
                                                    移除
                                                </el-button>
                                            </template>
                                        </el-table-column>
                                    </el-table>

                                    <!-- 分页器 -->
                                    <div class="block" style="margin-top:15px;">
                                        <el-pagination align='center' @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[2,5,10,20]" :page-size="pageSize" layout="total, sizes, prev, pager, next, jumper" :total="tableData4.length">
                                        </el-pagination>
                                    </div>
                                </div>
                            </template>

                            <template>
                                <div id="table2" style="display: none">
                                    <el-table
                                            :data="tableData4.slice((currentPage-1)*pageSize,currentPage*pageSize)"
                                            border
                                            style="width: 100%"
                                            max-height="250">
                                        <el-table-column
                                                prop="bankName"
                                                label="银行分支"
                                                width="300">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb1"
                                                label="今日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb2"
                                                label="昨日存款金额">
                                        </el-table-column>
            <!--                            <el-table-column-->
            <!--                                    prop="zb3"-->
            <!--                                    label="比昨日（%）">-->
            <!--                            </el-table-column>-->
                                        <el-table-column
                                                fixed="right"
                                                label="操作"
                                                width="120">
                                            <template slot-scope="scope">
                                                <el-button
                                                        @click.native.prevent="deleteRow(scope.$index, tableData4)"
                                                        type="text"
                                                        size="small">
                                                    移除
                                                </el-button>
                                            </template>
                                        </el-table-column>
                                    </el-table>

                                    <!-- 分页器 -->
                                    <div class="block" style="margin-top:15px;">
                                        <el-pagination align='center' @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[2,5,10,20]" :page-size="pageSize" layout="total, sizes, prev, pager, next, jumper" :total="tableData4.length">
                                        </el-pagination>
                                    </div>
                                </div>
                            </template>

                            <template>
                                <div id="table3" style="display: none">
                                    <el-table
                                            :data="tableData4.slice((currentPage-1)*pageSize,currentPage*pageSize)"
                                            border
                                            style="width: 100%"
                                            max-height="250">
                                        <el-table-column
                                                prop="bankName"
                                                label="银行分支"
                                                width="300">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb1"
                                                label="今日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb2"
                                                label="昨日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb3"
                                                label="上月同日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                fixed="right"
                                                label="操作"
                                                width="120">
                                            <template slot-scope="scope">
                                                <el-button
                                                        @click.native.prevent="deleteRow(scope.$index, tableData4)"
                                                        type="text"
                                                        size="small">
                                                    移除
                                                </el-button>
                                            </template>
                                        </el-table-column>
                                    </el-table>

                                    <!-- 分页器 -->
                                    <div class="block" style="margin-top:15px;">
                                        <el-pagination align='center' @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[2,5,10,20]" :page-size="pageSize" layout="total, sizes, prev, pager, next, jumper" :total="tableData4.length">
                                        </el-pagination>
                                    </div>
                                </div>
                            </template>

                            <template>
                                <div id="table4"  style="display: none">
                                    <el-table
                                            :data="tableData4.slice((currentPage-1)*pageSize,currentPage*pageSize)"
                                            border
                                            style="width: 100%"
                                            max-height="250">
                                        <el-table-column
                                                prop="bankName"
                                                label="银行分支"
                                                width="300">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb1"
                                                label="今日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb2"
                                                label="昨日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                            prop="zb3"
                                            label="上月同日存款金额">
                                        </el-table-column>
                                        <el-table-column
                                                prop="zb4"
                                                label="比昨日（%）">
                                        </el-table-column>
                                        <el-table-column
                                                fixed="right"
                                                label="操作"
                                                width="120">
                                            <template slot-scope="scope">
                                                <el-button
                                                        @click.native.prevent="deleteRow(scope.$index, tableData4)"
                                                        type="text"
                                                        size="small">
                                                    移除
                                                </el-button>
                                            </template>
                                        </el-table-column>
                                    </el-table>

                                    <!-- 分页器 -->
                                    <div class="block" style="margin-top:15px;">
                                        <el-pagination align='center' @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage" :page-sizes="[2,5,10,20]" :page-size="pageSize" layout="total, sizes, prev, pager, next, jumper" :total="tableData4.length">
                                        </el-pagination>
                                    </div>
                                </div>
                            </template>
                        </div>


                        <!-- 折线图部分-->
                        <div id="zhexianView" style="display: none">
                            <el-select  placeholder="选择业务包" v-model="value1"@change="chooseSelectChange">
                                <el-option
                                        v-for="item in options"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                </el-option>
                            </el-select>

                            <div >
                                <el-row>
                                    <el-col :span="12">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>选择分行</span>
                                            </div>
                                            <template>
                                                <el-select v-model="zexianvalue" placeholder="请选择">
                                                    <el-option
                                                            v-for="item in cities"
                                                            :key="item.value"
                                                            :label="item.label"
                                                            :value="item.value">
                                                        <span style="float: left">{{ item.label }}</span>
                                                        <span style="float: right; color: #8492a6; font-size: 13px">{{ item.value }}</span>
                                                    </el-option>
                                                </el-select>
                                            </template>
                                        </el-card>
                                    </el-col>
                                    <el-col :span="2">
                                        <div>&nbsp;</div>
                                    </el-col>
                                    <el-card class="box-card">
                                        <div slot="header" class="clearfix">
                                            <span>选择时间段</span>
                                        </div>
                                        <el-col :span="10">
                                            <div class="block">
                                                <span class="demonstration">时间范围： </span>
                                                <el-date-picker
                                                        v-model="value6"
                                                        type="daterange"
                                                        range-separator="至"
                                                        start-placeholder="开始日期"
                                                        end-placeholder="结束日期"
                                                        @change="getDate"
                                                        value-format="yyyy-MM-dd">
                                                </el-date-picker>
                                            </div>
                                        </el-col>
                                    </el-card>
                                </el-row>

                                <div id="main" style="width: 1000px;height:450px;">

                                </div>
                            </div>

                        </div>

                        <!-- 柱状图部分-->
                        <div id="zhuzhuangView"  style="display: none">
                            <el-select v-model="value2" placeholder="选择业务包" @change="chooseSelectChange">
                                <el-option
                                        v-for="item in options"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                </el-option>
                            </el-select>
                            <div >
                                <el-row>
                                    <el-col :span="8">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>分类</span>
                                                <!--<el-button style="float: right; padding: 3px 0" type="text" @click="testVisible = true">操作按钮</el-button>-->
                                            </div>
                                            <!--<div  class="text item">-->
                                            <!--存储数-->
                                            <!--</div>-->
                                            <!-- <el-radio-group v-model="check">
                                                <el-radio ：label="备选框">备选框</el-radio><br/>
                                            </el-radio-group> -->
                                            <el-radio-group v-model="check">
                                                <div v-for='fl in fenlei'>
                                                    <el-radio @click.native='changebar'
                                                              :label="fl.label" class="text item" ></el-radio><br/>
                                                </div>
                                            </el-radio-group>
                                        </el-card>
                                    </el-col>
                                    <el-col :span="8">
                                        <el-card class="box-card">
                                            <div slot="header" class="clearfix">
                                                <span>值轴</span>
                                                <el-button style="float: right; padding: 3px 0" type="text"  @click="clicktianjia()">添加计算指标</el-button>
                                            </div>
                                            <div>
                                                <el-dialog title="计算指标" :visible.sync="dialogFormVisible">
                                                    <el-dialog
                                                            width="30%"
                                                            title="内层 Dialog"
                                                            :visible.sync="innerVisible"
                                                            append-to-body>
                                                        <div class="block">
                                                            <span class="demonstration">时间范围： </span>
                                                            <el-date-picker
                                                                    v-model="value6"
                                                                    type="daterange"
                                                                    range-separator="至"
                                                                    start-placeholder="开始日期"
                                                                    end-placeholder="结束日期"
                                                                    @change="addcxDate"
                                                                    value-format="yyyy-MM-dd">
                                                            </el-date-picker>
                                                        </div>
                                                        <div slot="footer" class="dialog-footer">
                                                            <el-button @click="innerquxiao()">取 消</el-button>
                                                            <el-button type="primary" @click="addcxDate()">确 定</el-button>
                                                        </div>
                                                    </el-dialog>
                                                    <el-form :model="form">
                                                        <el-form-item label="指标名" :label-width="formLabelWidth">
                                                            <el-input v-model="form.name" auto-complete="off"></el-input>
                                                        </el-form-item>
                                                        <el-form-item label="计算方式" :label-width="formLabelWidth">
                                                            <el-select v-model="form.region" placeholder="选择指标生成方式" @change="zbWaysChange">
                                                                <el-option label="查询" value="chaxun" ></el-option>
                                                                <el-option label="公式" value="gongshi"></el-option>
                                                            </el-select>
                                                        </el-form-item>
                                                    </el-form>


                                                    <!-- ------------------公式部分----------------->
                                                    <div id="gshiDiv" style="display:none;">
                                                        <el-row>
                                                            <el-col :span="8" >
                                                                <div id="gDivL" class="grid-content bg-purple-light">
                                                                    <el-collapse  style="opacity: 0.5"><!--@node-click="handleNodeClick" -->
                                                                        <el-tree :data="treedata" :props="defaultProps"  @node-click="getTreeChecked" ></el-tree>
                                                                    </el-collapse>
                                                                </div>
                                                            </el-col>
                                                            <el-col :span="16">
                                                                <div >
                                                                    <el-row>
                                                                        <el-col>
                                                                            <div  id="gDiv1" class="grid-content bg-purple"  contenteditable="true" >
                                                                   <span  v-for="sp in spanList" >
                                                                       <span v-if="sp.fuhao==='no'" role="presentation" class="textspan"  contenteditable="false">{{sp.label}}</span>
                                                                       <span v-else role="presentation"  contenteditable="false">{{sp.label}}</span>
                                                                   </span>

                                                                                <!--<div>-->
                                                                                <!--<span role="presentation" class="textspan"  contenteditable="false">存储率</span>-->
                                                                                <!--</div>-->
                                                                            </div>
                                                                        </el-col>
                                                                    </el-row>

                                                                    <el-row>
                                                                        <el-col><div class="grid-content bg-purple-light">
                                                                            <i class="iconfont icon-plus-add" @click="iclick($event)"  name="+"></i>
                                                                            <i class="iconfont icon-plus-minus" @click="iclick($event)"  name="-"></i>
                                                                            <i class="iconfont icon-chenghao" @click="iclick($event)" name="*"></i>
                                                                            <i class="iconfont icon-chuhao" @click="iclick($event)" name="/"></i>
                                                                            <i class="iconfont icon-zuokuohao1" @click="iclick($event)" name="("></i>
                                                                            <i class="iconfont icon-youkuohao1" @click="iclick($event)" name=")"></i>
                                                                        </div></el-col>
                                                                    </el-row>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </div>
                                                    <!-- ------------------公式部分----------------->


                                                    <div slot="footer" class="dialog-footer">
                                                        <el-button @click="quxiao()">取 消</el-button>
                                                        <el-button type="primary" @click="add()">确 定</el-button>
                                                    </div>
                                                </el-dialog>
                                            </div>
                                            <el-radio-group v-model="check2">
                                                <div v-for='zz in zblist'>
                                                    <el-radio @click.native='changebar'
                                                              :label="zz.label" class="text item" ></el-radio><br/>
                                                </div>
                                            </el-radio-group>
                                        </el-card>
                                    </el-col>
                                </el-row>
                            </div>

                            <div style="width:100%;height:30%;">
                                <div id="zhuzhuang" title="柱状图" style="width:1200px;height:400px;">柱状图
                                </div>
                            </div>
                        </div>




                        <!-- 饼图部分-->
                        <div id="binView"  style="display: none">
                            <el-select v-model="value" placeholder="选择业务包" @change="chooseSelectChange">
                                <el-option
                                        v-for="item in options"
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value">
                                </el-option>
                            </el-select>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <div class='ana_main' id='ana_chart_page'>

        </div>
    </div>

    <div id="holishit" class="pop-up ana-pop-up">
        <span class="close-pop"></span>
        <h2 class="title">历史数据保存</h2>
        <div class="GM_ipone">
            <div class="GM_ipone_bar" id="apptop">
                <div class="GM_ipone_one a">
                    筛选条件
                </div>
                <a class="select-attr" href="#" v-for="(pan,index) in panlist.list" @click="deleteSelected(index)"> {{
                    pan.panAttrValue }}<b> ✖ </b>
                </a>
            </div>
        </div>
        <div class="GM_banner w">
            <div class="GM_nav">
                <div class="GM_selector">
                    <div class="title">
                        <h3><em>导出筛选</em></h3>
                    </div>
                    <div class="GM_nav_logo" id="app">
                        <div class="GM_pre" v-for="(attrinfo,index) in attrlist">
                            <div class="sl_key">
                                <span>{{ attrinfo.attrName }} :</span>
                            </div>
                            <div class="sl_value">
                                <ul v-for="attrValue in attrinfo.attrValueList">
                                    <a @click="addSelected($event,index)">{{ attrValue.valueName }}</a>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="appdate">
            <template>
                <div class="block">
                    <div style="width:1200px; margin:auto">
                        <span class="demonstration"
                              style=" color:#56abe4; font-size: 14px;margin: 0px auto;">时间范围：</span>
                        <el-date-picker
                                v-model="value1"
                                type="daterange"
                                size="small"
                                range-separator="至"
                                start-placeholder="开始日期"
                                end-placeholder="结束日期"
                                @change="chooseTimeRange"
                                value-format="yyyy-MM-dd">
                        </el-date-picker>
                        <el-button icon="el-icon-download" circle onclick="exportExcel_Doit()"></el-button>
                    </div>
                </div>
            </template>
        </div>
        <div id="apptable">
            <el-table
                    id = "historySaveTable"
                    :header-cell-style="{background:'#0c1c2a',color:'#526cdf'}"
                    :cell-style="{background:'#0c1c2a',color:'#2e74f1'}"
                    :data="table.tableData.slice(0,1*5)"
                    border
                    max-height="300"
                    style="width: 1200px;margin:auto;color:#56abe4;">
                <el-table-column
                        type="index"
                        width="60px">
                </el-table-column>
                <template v-for='(col) in table.tablecolData'>
                    <el-table-column
                            :prop="col.colItem"
                            :label="col.colName"
                            sortable
                    >
                    </el-table-column>
                </template>
            </el-table>
        </div>
    </div>
    <div id="downloadTable" style="visibility: hidden;">
        <el-table
                id="downloan-his"
                border
                :data="table.tableData"
                style="width: 1200px;margin:auto;color:#56abe4;">
            <template v-for='(col) in table.tablecolData'>
                <el-table-column
                        :prop="col.colItem"
                        :label="col.colName"
                        width="124px"
                >
                </el-table-column>
            </template>
        </el-table>
    </div>
</div>

<div class="container2">
    <div class="pop-up1">
        <span class="close-pop"></span>
        <h2 class="title">计划配置</h2>
        <div id="pages-div" class="pages-div" class="mineus">
            <p><span>预测时长：</span></p>
            <input id="pre_period" type="number" max="6" min="1">
        </div>
        <div class="detail-container">
        </div>
    </div>
</div>
</div>

</body>
<script type="text/javascript" src="js/layer/layer.min.js"></script>
<script type="text/javascript" src="js/layer/laydate/laydate.js"></script>
<script type="text/javascript" src="js/echarts.min.js"></script>
<script type="text/javascript" src="js/echarts-gl.min.js"></script>
<script type="text/javascript" src="js/echarts-wordcloud.min.js"></script>
<script type="text/javascript" src="js/china.js"></script>
<script type="text/javascript" src="js/data/guangdong.js"></script>
<script type="text/javascript" src="js/base.js"></script>
<script type="text/javascript" src="js/analyse.js"></script>
<script type="text/javascript">
    $('document').ready(function () {
        $("body").css('visibility', 'visible');
        var localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
        localStorage.setItem("data", localData);
        $('#conBtn').on('click', function () {
            localData = [$('#teacher').val(), $('#start').val() + '/' + $('#end').val(), $('#leader').val()]
            if (typeof (Storage) !== "undefined") {
                localStorage.setItem("data", localData);
                var arr = localStorage.getItem("data").split(',');
                $('#name_a').html(arr[0]);
                $('#date_a').html(arr[1]);
                $('#lea_a').html(arr[2]);
            }
        });
        registerwebsock();
        //connect();
    });

</script>
<script>
    var vmRecommand = new Vue({
        el: '#vueRecommand',
        data: {
            recdata :null
        }
    })
</script>
<style>
    .flex {
        display: -webkit-flex;
        display: flex;
        justify-content:space-around;
        width: 70%;
    }

    .text {
        font-size: 14px;
    }

    .item {
        margin-bottom: 18px;
    }

    .clearfix:before,
    .clearfix:after {
        display: table;
        content: "";
    }
    .clearfix:after {
        clear: both
    }

    /*卡片的宽度 这里应该再调一下卡片之间的距离*/
    /*.box-card {*/
    /*width: 480px;*/
    /*}*/

    .el-col {
        border-radius: 4px;
    }
    .bg-while {
        background: #ffffff;
    }
    .bg-purple {
        background: #d3dce6;
    }
    .bg-purple-light {
        background: #e5e9f2;
    }
    .grid-content {
        border-radius: 4px;
        min-height: 36px;
    }
    .row-bg {
        padding: 10px 0;
        background-color: #f9fafc;
    }
    #gsDiv1{
        height: 200px;
    }
    #gsDivL{
        height: 236px;
    }
    #main{
        position:relative;
        top:0px;
        left:150px;
    }
    #appdate{
        position: relative;
        font-size: 20px;
    }

    #appdate1{
        position: relative;
        font-size: 20px;
    }
    .textspan{
        color: #3685f2;
        /*Font: 12px;*/
        background: rgba(54,133,242,0.1);
        margin:0px 1px;
        padding: 0px 2px;
    }
</style>
</html>