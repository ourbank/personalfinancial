var analysebus = '-1';
var analysefac = '-1';
var curyear;
//第一份数据，定制化查询部分
var testdata = {
    "data": [{
        "data": [{
            "data": [2, 6, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2009年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2010年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2011年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2012年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2013年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2014年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2015年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2016年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2017年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2018年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2019年"
    }],
    "bankname": "广州分行",
    "bussiness": "card"
};

var testdata2 = {
    "data": [{
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2009年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2010年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2011年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2012年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2013年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2014年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2015年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2016年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2017年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2018年"
    }, {
        "data": [{
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "1月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "2月"
        }, {
            "data": [0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "3月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "4月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "5月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "6月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "7月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "8月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "9月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "10月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "11月"
        }, {
            "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            "time": "12月"
        }], "time": "2019年"
    }],
    "bankname": "深圳分行",
    "bussiness": "card"
};


//先写死业务请求的数据 分析部分

//职业
var data00 = [{
    name: 'IT人员',
    value: 192581,
    percent: '30'
}, {
    name: '教师',
    value: 215635,
    percent: '14.08',
}, {
    name: '管理人员',
    value: 224585,
    percent: '14.67',
}, {
    name: '行政',
    value: 224585,
    percent: '14.67',
}, {
    name: '医生',
    value: 224585,
    percent: '14.67',
}];
//年龄
var data01 = [{
    name: '高于50岁',
    value: 192581,
    percent: '30'
}, {
    name: '30岁~50岁',
    value: 215635,
    percent: '14.08',
}, {
    name: '20岁~30岁',
    value: 224585,
    percent: '14.67',
}, {
    name: '低于20岁',
    value: 224585,
    percent: '14.67',
}];

//地址

var data02 = [{
    name: '一线城市',
    value: 192581,
    percent: '30'
}, {
    name: '二线城市',
    value: 215635,
    percent: '14.08',
}, {
    name: '三线城市',
    value: 224585,
    percent: '14.67',
}, {
    name: '其他',
    value: 224585,
    percent: '14.67',
}];

var data03 = [{
    name: '男性',
    value: 192581,
    percent: '40'
}, {
    name: '女性',
    value: 215635,
    percent: '60',
}];
var data10 = data00;
var data20 = data00;
var data30 = data00;
var data11 = data01;
var data21 = data01;
var data31 = data01;
var data12 = data02;
var data22 = data02;
var data32 = data02;
var data13 = data03;
var data23 = data03;
var data33 = data03;

//选择对应数据
function selectdata(num1, num2) {
    if (num2 == '-1') {
        //单独处理
    } else {
        if (num2 == '0') {
            return data00;
        } else if (num2 == '1') {
            return data01;
        } else if (num2 == '2') {
            return data02;
        } else if (num2 == '3') {
            return data03;
        }

    }

}


function fnW(str) {
    var num;
    str >= 10 ? num = str : num = "0" + str;
    return num;
}

//获取当前时间
var timer = setInterval(function () {
    var date = new Date();
    var year = date.getFullYear(); //当前年份
    var month = date.getMonth(); //当前月份
    var data = date.getDate(); //天
    var hours = date.getHours(); //小时
    var minute = date.getMinutes(); //分
    var second = date.getSeconds(); //秒
    var day = date.getDay(); //获取当前星期几
    var ampm = hours < 12 ? 'am' : 'pm';
    $('#time').html(fnW(hours) + ":" + fnW(minute) + ":" + fnW(second));
    $('#date').html('<span>' + year + '/' + (month + 1) + '/' + data + '</span><span>' + ampm + '</span><span>周' + day + '</span>')

}, 1000)

var title1_1; //标题1：分析 的第一个选择参数
var title1_2; //标题1：分析 的第二个选择参数
var title2_1; //标题2：预测 的第一个选择参数
/*按钮点击方法*/
$('.select-ul').on('click', 'li', function () {
    $(this).addClass('active').siblings('li').removeClass('active').parent().hide().siblings('.select-div').html($(this).html());
    var parentDiv = $(this).parent().parent().parent();
    //alert($(this).attr("data-value"));
})

//获取按钮的值  自己加了id便于检索

$('#select_business').on('click', 'li', function () {
    analysebus = $(this).attr("data-value");

    chart1();

})

$('#select_factor').on('click', 'li', function () {
    analysefac = $(this).attr("data-value");
    //mybigchart1.setOption(option);
    chart1();
})


$('#select_business').on('click', function () {

    //var ul = document.getElementById("analyli1_1").getElementsByTagName("ul")[0].getElementsByTagName("li");
    title1_1 = $("#analyli1_1").text();
    title1_2 = $("#analyli1_2").text();
    title1 = '业务指标分析';
    if (title1_1 != '业务指标' && title1_2 != '分析指标') {
        $("#title1").text(title1 + ": " + title1_1 + " - " + title1_2);
    }
    title2_1 = $("#analyli2_1").text();
    title2 = '业务指标预测';
    if (title2_1 != '预测指标') {
        $("#title2").text(title2 + ": " + title2_1);
    }


});

$('#select_factor').on('click', function () {

    //var ul = document.getElementById("analyli1_1").getElementsByTagName("ul")[0].getElementsByTagName("li");
    title1_1 = $("#analyli1_1").text();
    title1_2 = $("#analyli1_2").text();
    title1 = '业务指标分析';
    console.log(title1_1 + '00' + title1_2)
    if (title1_1 != '业务指标' && title1_2 != '分析指标') {
        $("#title1").text(title1 + ": " + title1_1 + " - " + title1_2);
    }
    title2_1 = $("#analyli2_1").text();
    title2 = '业务指标预测';
    if (title2_1 != '预测指标') {
        $("#title2").text(title2 + ": " + title2_1);
    }


});

//鼠标滑动到按钮，按钮内容变成白色
var imgName;
$('.title-box').children('button').hover(function () {
    imgName = $(this).children('img').attr('src').split('.png')[0];
    $(this).children('img').attr('src', imgName + '_on.png');
}, function () {
    $(this).children('img').attr('src', imgName + '.png');

});


var startColor = ['#0e94eb', '#c440ef', '#efb013', '#2fda07', '#d8ef13', '#2e4af8', '#0eebc4', '#f129b1', '#17defc', '#f86363'];
var borderStartColor = ['#0077c5', '#a819d7', '#c99002', '#24bc00', '#b6cb04', '#112ee2', '#00bd9c', '#ce078f', '#00b2cd', '#ec3c3c'];


$('.select').on('blur', function () {
    $(this).find('.select-ul').hide();
})
//下拉框点击出现下拉框内容
$('.select-div').on('click', function () {
    if ($(this).siblings('.select-ul').is(":hidden")) {
        $(this).siblings('.select-ul').show();
    } else {
        $(this).siblings('.select-ul').hide();
    }
})
$('.select-ul').on('click', 'li', function () {
    $(this).addClass('active').siblings('li').removeClass('active').parent().hide().siblings('.select-div').html($(this).html());
    var parentDiv = $(this).parent().parent().parent();
})

//银行指标分析占比，带边框效果的饼图

// 点击其他位置收起选择框

function bigchart1() {

    var data;
    //data 为模拟数据
    data = data00
    var mybigchart1 = echarts.init(document.getElementById('bigchart1'));
    window.addEventListener('resize', function () {
        mybigchart1.resize();
    });

    var str = '';
    for (var i = 0; i < data.length; i++) {
        //这句可以删除百分数
        //str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + ""+ '</span></p>';
        str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + "" + '</span>' + Number(data[i].percent).toFixed(2) + '%</p>';
    }
    $('#pie1').html(str);


    function deepCopy(obj) {
        if (typeof obj !== 'object') {
            return obj;
        }
        var newobj = {};
        for (var attr in obj) {
            newobj[attr] = obj[attr];
        }
        return newobj;
    }

    var RealData = [];
    var borderData = [];
    RealData.splice(0, RealData.length);
    borderData.splice(0, borderData.length);
    data.map((item, index) => {
        var newobj = deepCopy(item);
        var newobj1 = deepCopy(item);
        RealData.push(newobj);
        borderData.push(newobj1);
    });
    RealData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: startColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: startColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    borderData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: borderStartColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: borderStartColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    var option = {
        tooltip: {
            trigger: 'item',
            //            position: ['30%', '50%'],
            confine: true,
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        series: [
            // 主要展示层的
            {
                radius: ['50%', '85%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                name: "占比为:",
                data: RealData
            },
            // 边框的设置
            {
                radius: ['45%', '50%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                animation: false,
                tooltip: {
                    show: false
                },
                data: borderData
            }
        ]
    };
    mybigchart1.clear();
    mybigchart1.setOption(option);
}

//点击筛选按钮end
bigchart1()

function bigchart2() {

    var data;
    //data 为模拟数据
    data = data01
    var mybigchart2 = echarts.init(document.getElementById('bigchart2'));
    window.addEventListener('resize', function () {
        mybigchart2.resize();
    });

    var str = '';
    for (var i = 0; i < data.length; i++) {
        //这句可以删除百分数
        //str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + ""+ '</span></p>';
        str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + "" + '</span>' + Number(data[i].percent).toFixed(2) + '%</p>';
    }
    $('#pie2').html(str);

    function deepCopy(obj) {
        if (typeof obj !== 'object') {
            return obj;
        }
        var newobj = {};
        for (var attr in obj) {
            newobj[attr] = obj[attr];
        }
        return newobj;
    }

    var RealData = [];
    var borderData = [];
    RealData.splice(0, RealData.length);
    borderData.splice(0, borderData.length);
    data.map((item, index) => {
        var newobj = deepCopy(item);
        var newobj1 = deepCopy(item);
        RealData.push(newobj);
        borderData.push(newobj1);
    });
    RealData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: startColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: startColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    borderData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: borderStartColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: borderStartColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    var option = {
        tooltip: {
            trigger: 'item',
            //            position: ['30%', '50%'],
            confine: true,
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        series: [
            // 主要展示层的
            {
                radius: ['50%', '85%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                name: "占比为:",
                data: RealData
            },
            // 边框的设置
            {
                radius: ['45%', '50%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                animation: false,
                tooltip: {
                    show: false
                },
                data: borderData
            }
        ]
    };
    mybigchart2.clear();
    mybigchart2.setOption(option);
}

//点击筛选按钮end
bigchart2()


function bigchart3() {

    var data;
    //data 为模拟数据
    data = data02
    var mybigchart3 = echarts.init(document.getElementById('bigchart3'));
    window.addEventListener('resize', function () {
        mybigchart3.resize();
    });
    var str = '';
    for (var i = 0; i < data.length; i++) {
        //这句可以删除百分数
        //str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + ""+ '</span></p>';
        str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + "" + '</span>' + Number(data[i].percent).toFixed(2) + '%</p>';
    }
    $('#pie3').html(str);

    function deepCopy(obj) {
        if (typeof obj !== 'object') {
            return obj;
        }
        var newobj = {};
        for (var attr in obj) {
            newobj[attr] = obj[attr];
        }
        return newobj;
    }

    var RealData = [];
    var borderData = [];
    RealData.splice(0, RealData.length);
    borderData.splice(0, borderData.length);
    data.map((item, index) => {
        var newobj = deepCopy(item);
        var newobj1 = deepCopy(item);
        RealData.push(newobj);
        borderData.push(newobj1);
    });
    RealData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: startColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: startColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    borderData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: borderStartColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: borderStartColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    var option = {
        tooltip: {
            trigger: 'item',
            //            position: ['30%', '50%'],
            confine: true,
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        series: [
            // 主要展示层的
            {
                radius: ['50%', '85%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                name: "占比为:",
                data: RealData
            },
            // 边框的设置
            {
                radius: ['45%', '50%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                animation: false,
                tooltip: {
                    show: false
                },
                data: borderData
            }
        ]
    };
    mybigchart3.clear();
    mybigchart3.setOption(option);
}

//点击筛选按钮end
bigchart3()


function bigchart4() {

    var data;
    //data 为模拟数据
    data = data03
    var mybigchart4 = echarts.init(document.getElementById('bigchart4'));
    window.addEventListener('resize', function () {
        mybigchart4.resize();
    });

    var str = '';
    for (var i = 0; i < data.length; i++) {
        //这句可以删除百分数
        //str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + ""+ '</span></p>';
        str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + "" + '</span>' + Number(data[i].percent).toFixed(2) + '%</p>';
    }
    $('#pie4').html(str);

    function deepCopy(obj) {
        if (typeof obj !== 'object') {
            return obj;
        }
        var newobj = {};
        for (var attr in obj) {
            newobj[attr] = obj[attr];
        }
        return newobj;
    }

    var RealData = [];
    var borderData = [];
    RealData.splice(0, RealData.length);
    borderData.splice(0, borderData.length);
    data.map((item, index) => {
        var newobj = deepCopy(item);
        var newobj1 = deepCopy(item);
        RealData.push(newobj);
        borderData.push(newobj1);
    });
    RealData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: startColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: startColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    borderData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: borderStartColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: borderStartColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    var option = {
        tooltip: {
            trigger: 'item',
            //            position: ['30%', '50%'],
            confine: true,
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        series: [
            // 主要展示层的
            {
                radius: ['50%', '85%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                name: "占比为:",
                data: RealData
            },
            // 边框的设置
            {
                radius: ['45%', '50%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                animation: false,
                tooltip: {
                    show: false
                },
                data: borderData
            }
        ]
    };
    mybigchart4.clear();
    mybigchart4.setOption(option);
}

//点击筛选按钮end
bigchart4()


var data;

function chart1() {
    //data 为模拟数据

    //data 为模拟数据
    if (analysefac == '-1') {
        data = data00;
    } else data = selectdata(analysebus, analysefac);

    var myChart = echarts.init(document.getElementById('pie'));
    window.addEventListener('resize', function () {
        myChart.resize();
    });


    function deepCopy(obj) {
        if (typeof obj !== 'object') {
            return obj;
        }
        var newobj = {};
        for (var attr in obj) {
            newobj[attr] = obj[attr];
        }
        return newobj;
    }

    var xData = [],
        yData = [];
    data.map((a, b) => {
        xData.push(a.name);
        yData.push(a.value);
    });


    var RealData = [];
    var borderData = [];
    data.map((item, index) => {
        var newobj = deepCopy(item);
        var newobj1 = deepCopy(item);
        RealData.push(newobj);
        borderData.push(newobj1);
    });
    RealData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: startColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: startColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    borderData.map((item, index) => {
        item.itemStyle = {
            normal: {
                color: {
                    type: 'linear',
                    x: 0,
                    y: 0,
                    x2: 0,
                    y2: 1,
                    colorStops: [{
                        offset: 0,
                        color: borderStartColor[index] // 0% 处的颜色
                    }, {
                        offset: 1,
                        color: borderStartColor[index] // 100% 处的颜色
                    }],
                    globalCoord: false // 缺省为 false
                },
            }
        }
    });
    var option = {
        tooltip: {
            trigger: 'item',
            //            position: ['30%', '50%'],
            confine: true,
            formatter: "{a} <br/>{b}: {c} ({d}%)"
        },
        series: [
            // 主要展示层的
            {
                radius: ['50%', '85%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                name: "占比为:",
                data: RealData
            },
            // 边框的设置
            {
                radius: ['45%', '50%'],
                center: ['50%', '50%'],
                type: 'pie',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: false
                    }
                },
                animation: false,
                tooltip: {
                    show: false
                },
                data: borderData
            }
        ]
    };

    var str = '';
    for (var i = 0; i < data.length; i++) {
        //这句可以删除百分数
        //str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + ""+ '</span></p>';
        str += '<p><span><i class="legend" style="background:' + startColor[i] + '"></i></span>' + data[i].name + '<span class="pie-number" style="color:' + startColor[i] + '">' + "" + '</span>' + Number(data[i].percent).toFixed(2) + '%</p>';
    }
    $('.pie-data').html(str);
    myChart.clear();

    myChart.setOption(option);
}

$('#filBtn').on('click', function () {
    if ($('#filCon').is(":hidden")) {
        $('#filCon').attr('style', 'display:flex');
    } else {
        $('#filCon').hide();
    }
})
//点击筛选按钮end

chart1()

//----------------------业务指标分析占比内容end---------------

//------------业务预测数据内容---------------
//点击筛选按钮
$('#anlyfilBtn').on('click', function () {
    if ($('#fil2Con').is(":hidden")) {
        $('#fil2Con').attr('style', 'display:flex');
    } else {
        $('#fil2Con').hide();
    }
})

$('#fil1Btn').on('click', function () {
    if ($('#fil1Con').is(":hidden")) {
        $('#fil1Con').attr('style', 'display:flex');
    } else {
        $('#fil1Con').hide();
    }
})


var myChartPre = echarts.init(document.getElementById('chart11'));

function chart11() {
    // 基于准备好的dom，初始化echarts实例
    myChartPre.clear();
    option = {
        toolbox: {
            show: false,
            feature: {
                mark: {show: true},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        title: {
            text: ''
        },
        tooltip: {
            trigger: 'axis',
            formatter: function (params) {
                // 自定义悬浮框，用于展示增量百分比
                if (params.length > 1 && params[0].seriesName.indexOf('预测') != -1) {
                    return params[0].name + "<br/>"
                        + params[0].seriesName + "：" + params[0].value + "<br/>"
                        + params[1].seriesName + "：" + params[1].value + "<br/>"
                        + "业务理论增量：" + ((((params[1].value - params[0].value) / params[0].value) * 100).toFixed(2)) + "%";
                }
                if (params.length > 1 && params[0].seriesName.indexOf('历史') != -1) {
                    return params[0].name + "<br/>"
                        + params[0].seriesName + "：" + params[0].value + "<br/>";
                }
                if (params.length = 1 && params[0].seriesName.indexOf('预测') != -1) {
                    return params[0].name + "<br/>"
                        + params[0].seriesName + "：" + params[0].value + "<br/>";
                }
                return params[0].name + "<br/>"
                    + params[0].seriesName + "：" + params[0].value + "<br/>"
                    + params[1].seriesName + "：" + params[1].value + "<br/>";
            }
        },
        legend: {
            data: ['历史', '预测', '计划'],
            textStyle: {
                color: '#fff'
            },
            top: '8%'
        },
        grid: {
            top: '20%',
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        color: ['#FF4949', '#FFA74D', '#FFEA51', '#4BF0FF', '#44AFF0', '#4E82FF', '#584BFF', '#BE4DFF', '#F845F1'],
        xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['7月', '8月', '9月', '10月', '11月', '12月'],
            splitLine: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    color: '#fff'
                }
            }
        },
        yAxis: {
            name: '张',
            type: 'value',
            splitLine: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    color: '#fff'
                }
            }
        },
        series: [
            {
                name: '历史',
                type: 'line',
                smooth: true, //平滑曲线显示
                data: [3961.88, 4233.63, 4183.14]
            },
            {
                name: '预测',
                type: 'line',
                smooth: true, //平滑曲线显示
                data: [, , 4183.14, 3633.01, 3704.47, 4204.47]
            }
            // 此处添加
        ]
    };
    myChartPre.setOption(option);
}

chart11('');

// 预测界面中  目标分析
$("#pre_ana_btn").on('click', function () {
    var options = myChartPre.getOption();
    var out = [options.series[0], options.series[1]];
    var target = $("#target").val();
    var pre = options.series[1].data;
    var plan = getplan(pre, target);
    var out_data = {name: '计划', type: 'line', smooth: true, data: plan}
    out.push(out_data);
    options.series = out;
    myChartPre.clear();
    myChartPre.setOption(options);
})

// 目标分析函数
function getplan(pre, target) {
    //console.log(target);
    var out = [];
    var i;
    for (i = 0; i < pre.length; i++) {
        out.push(pre[i]);
        if (pre[i] != null) break;
    }
    var now = out[i];
    var gap = (target - now) / (pre.length - i - 1);
    //console.log(gap);

    for (i = i + 1; i < pre.length; i++) {
        now = now + gap;
        out.push(now.toFixed(2));
    }
    //console.log(out);
    return out;
}

//点击筛选按钮end
function chart2() {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('prechart'));
    myChart.clear();
    option = {
        title: {
            text: ''
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['历史', '预测'],
            textStyle: {
                color: '#fff'
            },
            top: '8%'
        },
        grid: {
            top: '20%',
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        color: ['#FF4949', '#FFA74D', '#FFEA51', '#4BF0FF', '#44AFF0', '#4E82FF', '#584BFF', '#BE4DFF', '#F845F1'],
        xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['7月', '8月', '9月', '10月', '11月', '12月'],
            splitLine: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    color: '#fff'
                }
            }
        },
        yAxis: {
            name: '张',
            type: 'value',
            splitLine: {
                show: false
            },
            axisLine: {
                lineStyle: {
                    color: '#fff'
                }
            }
        },
        series: [
            {
                name: '历史',
                type: 'line',
                smooth: true, //平滑曲线显示
                data: [3961.88, 4233.63, 4183.14]
            },
            {
                name: '预测',
                type: 'line',
                smooth: true, //平滑曲线显示
                data: [, , 4183.14, 3633.01, 3704.47, 4204.47]
            }
            // 此处添加
        ]
    };
    myChart.setOption(option);
}

chart2('');
//------------指标预测end---------------

/* =========================地图模块图表============================*/
//地图地点选择
var myChart3 = echarts.init(document.getElementById('gdMap'));
var myChart33 = echarts.init(document.getElementById('gdMap_big'));
var myChart_gdmap_alert = echarts.init(document.getElementById('gdMap_alert'));

function chart3(chartType) {
    var data = [
        {
            name: '广州市',
            value: 0.0
        },
        {
            name: '韶关市',
            value: 0.0
        },
        {
            name: '深圳市',
            value: 0.0
        },
        {
            name: '珠海市',
            value: 0.0
        },
        {
            name: '汕头市',
            value: 0.0
        },
        {
            name: '佛山市',
            value: 0.0
        },
        {
            name: '江门市',
            value: 0.0
        },
        {
            name: '湛江市',
            value: 0.0
        },
        {
            name: '茂名市',
            value: 0.0
        },
        {
            name: '肇庆市',
            value: 0.0
        },
        {
            name: '惠州市',
            value: 0.0
        },
        {
            name: '梅州市',
            value: 0.0
        },
        {
            name: '汕尾市',
            value: 0.0
        },
        {
            name: '河源市',
            value: 0.0
        },
        {
            name: '阳江市',
            value: 0.0
        },
        {
            name: '清远市',
            value: 0.0
        },
        {
            name: '东莞市',
            value: 0
        },
        {
            name: '中山市',
            value: 0.0
        },
        {
            name: '潮州市',
            value: 0.0
        },
        {
            name: '揭阳市',
            value: 0.0
        },
        {
            name: '云浮市',
            value: 0.0
        }]

    window.addEventListener('resize', function () {
        myChart3.resize();
        myChart33.resize();
    });
    var yMax = 0;
    for (var j = 0; j < data.length; j++) {
        if (yMax < data[j].value) {
            yMax = data[j].value;
        }
    }
    var option = {
        animation: true,
        tooltip: {
            show: true
        },
        visualMap: {
            show: false,
            min: 0,
            max: yMax,
            text: ['高', '低'],
            orient: 'horizontal',
            itemWidth: 15,
            itemHeight: 200,
            right: 0,
            bottom: 30,
            inRange: {
                color: ['#75ddff', '#0e94eb']
            },
            textStyle: {
                color: 'white'
            }
        },
        series: [
            {
                name: '数据名称',
                type: 'map',
                mapType: '广东',
                selectedMode: 'multiple',
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}<br/>{c}'
                },
                itemStyle: {
                    normal: {
                        borderWidth: 1,
                        borderColor: '#0e94eb',
                        label: {
                            show: false
                        }
                    },
                    emphasis: { // 也是选中样式
                        borderWidth: 1,
                        borderColor: '#fff',
                        backgroundColor: 'red',
                        label: {
                            show: true,
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    }
                },
                data: data,
            }
        ]
    };
    var option_big = {
        animation: true,
        tooltip: {
            show: true
        },
        visualMap: {
            show: true,
            min: 0,
            max: yMax,
            text: ['高', '低'],
            orient: 'horizontal',
            itemWidth: 15,
            itemHeight: 200,
            right: 0,
            bottom: 30,
            inRange: {
                color: ['#75ddff', '#0e94eb']
            },
            textStyle: {
                color: 'white'
            }
        },
        series: [
            {
                name: '数据名称',
                type: 'map',
                mapType: '广东',
                selectedMode: 'multiple',
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}<br/>{c}'
                },
                itemStyle: {
                    normal: {
                        borderWidth: 1,
                        borderColor: '#0e94eb',
                        label: {
                            show: false
                        }
                    },
                    emphasis: { // 也是选中样式
                        borderWidth: 1,
                        borderColor: '#fff',
                        backgroundColor: 'red',
                        label: {
                            show: true,
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    }
                },
                data: data,
            }
        ]
    };
    myChart3.setOption(option);
    myChart33.setOption(option_big);
}

chart3('');

// 警报界面地图
function chart_alert(chartType) {
    var data = [
        {
            name: '广州市',
            value: 5
        },
        {
            name: '韶关市',
            value: 4
        },
        {
            name: '深圳市',
            value: 1
        },
        {
            name: '珠海市',
            value: 21
        },
        {
            name: '汕头市',
            value: 19
        },
        {
            name: '佛山市',
            value: 17
        },
        {
            name: '江门市',
            value: 3
        },
        {
            name: '湛江市',
            value: 17
        },
        {
            name: '茂名市',
            value: 6
        },
        {
            name: '肇庆市',
            value: 26
        },
        {
            name: '惠州市',
            value: 14
        },
        {
            name: '梅州市',
            value: 19
        },
        {
            name: '汕尾市',
            value: 18
        },
        {
            name: '河源市',
            value: 24.4
        },
        {
            name: '阳江市',
            value: 7.6
        },
        {
            name: '清远市',
            value: 2.1
        },
        {
            name: '东莞市',
            value: 11.2
        },
        {
            name: '中山市',
            value: 12.4
        },
        {
            name: '潮州市',
            value: 15.6
        },
        {
            name: '揭阳市',
            value: 16.7
        },
        {
            name: '云浮市',
            value: 17.9
        }]

    window.addEventListener('resize', function () {
        myChart_gdmap_alert.resize();
    });
    var yMax = 0;
    for (var j = 0; j < data.length; j++) {
        if (yMax < data[j].value) {
            yMax = data[j].value;
        }
    }
    var option = {
        animation: true,
        tooltip: {
            show: true
        },
        visualMap: {
            show: false,
            min: 0,
            max: yMax,
            text: ['高', '低'],
            orient: 'horizontal',
            itemWidth: 15,
            itemHeight: 200,
            right: 0,
            bottom: 30,
            inRange: {
                color: ['#fff3f4', '#eb0a0a']
            },
            textStyle: {
                color: 'white'
            }
        },
        series: [
            {
                name: '数据名称',
                type: 'map',
                mapType: '广东',
                selectedMode: 'multiple',
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}<br/>{c}'
                },
                itemStyle: {

                    borderWidth: 1,
                    borderColor: '#eb696f'
                },
                label: {
                    show: false
                },
                emphasis: {
                    itemStyle: {
                        areaColor: '#c1ac13'
                    },
                    label: {
                        show: true,
                        textStyle: {
                            color: '#fff'
                        }
                    }
                },
                data: data,
            }
        ]
    };
    myChart_gdmap_alert.setOption(option);
}

chart_alert();

/* =========================地图模块图表节结束============================*/

/* =========================业务选择============================*/

//业务选择 按钮动态展示
var mouseleaveable_1 = true;
var mouseleaveable_2 = true;
var mouseleaveable_3 = true;
var mouseleaveable_4 = true;
$('#Jcardnum').css({y: -20}).transition({
    opacity: 1,
    y: 0
}, 1000, 'linear');
$('#Jcardnum').on('mouseover', function () {
    $('#Jcardnum').css({background: '#9400D3'})
});
$('#Jcardnum').on('mouseleave', function () {
    if (mouseleaveable_1)
        $('#Jcardnum').css({background: '#4169E1'})
});
$('#Jcardnum').on('click', function () {
    mouseleaveable_1 = false;
    mouseleaveable_2 = true;
    mouseleaveable_3 = true;
    mouseleaveable_4 = true;
    $('#Jcardnum').css({background: '#9400D3'});
    $('#Jloan').css({background: '#4169E1'});
    $('#Jcash').css({background: '#4169E1'});
    $('#Jmiddle').css({background: '#4169E1'});
});

$('#Jloan').css({y: -20}).transition({
    opacity: 1,
    y: 0,
    delay: 250
}, 1000, 'linear');
$('#Jloan').on('mouseover', function () {
    $('#Jloan').css({background: '#9400D3'})
});
$('#Jloan').on('mouseleave', function () {
    if (mouseleaveable_2)
        $('#Jloan').css({background: '#4169E1'})
});
$('#Jloan').on('click', function () {
    mouseleaveable_1 = true;
    mouseleaveable_2 = false;
    mouseleaveable_3 = true;
    mouseleaveable_4 = true;
    $('#Jcardnum').css({background: '#4169E1'});
    $('#Jloan').css({background: '#9400D3'});
    $('#Jcash').css({background: '#4169E1'});
    $('#Jmiddle').css({background: '#4169E1'});
});

$('#Jcash').css({y: -20}).transition({
    opacity: 1,
    y: 0,
    delay: 500
}, 1000, 'linear');
$('#Jcash').on('mouseover', function () {
    $('#Jcash').css({background: '#9400D3'})
});
$('#Jcash').on('mouseleave', function () {
    if (mouseleaveable_3)
        $('#Jcash').css({background: '#4169E1'})
});
$('#Jcash').on('click', function () {
    mouseleaveable_1 = true;
    mouseleaveable_2 = true;
    mouseleaveable_3 = false;
    mouseleaveable_4 = true;
    $('#Jcardnum').css({background: '#4169E1'});
    $('#Jloan').css({background: '#4169E1'});
    $('#Jcash').css({background: '#9400D3'});
    $('#Jmiddle').css({background: '#4169E1'});
});

$('#Jmiddle').css({y: -20}).transition({
    opacity: 1,
    y: 0,
    delay: 750
}, 1000, 'linear');
$('#Jmiddle').on('mouseover', function () {
    $('#Jmiddle').css({background: '#9400D3'})
});
$('#Jmiddle').on('mouseleave', function () {
    if (mouseleaveable_4)
        $('#Jmiddle').css({background: '#4169E1'})
});
$('#Jmiddle').on('click', function () {
    mouseleaveable_1 = true;
    mouseleaveable_2 = true;
    mouseleaveable_3 = true;
    mouseleaveable_4 = false;
    $('#Jcardnum').css({background: '#4169E1'});
    $('#Jloan').css({background: '#4169E1'});
    $('#Jcash').css({background: '#4169E1'});
    $('#Jmiddle').css({background: '#9400D3'});
});


$('#gdMap').css({opacity: 0, scale: 0.2}).transition({
    opacity: 1,
    scale: 1
}, 1000, 'linear');


/* =========================业务选择结束============================*/

/* =========================历史查询============================*/
// 新增查询的时候，会自动更新，会进行存储，默认只显示前4条
$('').on('click', function () {
    var data1 = $('#historydata1').text();
    var data2 = $('#historydata2').text();
    $('.historydata').transition({
        opacity: 0
    }, 500);
    $('.historydata').transition({
        opacity: 1
    }, 500);
    setTimeout(function () {
        $('#historydata1').text(data2)
    }, 500);
});
/* =========================历史查询结束============================*/


/* =========================时间选择器============================*/
var startV = '';
var endV = '';
laydate.skin('danlan');
var startTime = {
    elem: '#startTime',
    format: 'YYYY-MM-DD',
    min: '1997-01-01', //设定最小日期为当前日期
    max: laydate.now(), //最大日期
    istime: true,
    istoday: true,
    fixed: false,
    choose: function (datas) {
        startV = datas;
        endTime.min = datas; //开始日选好后，重置结束日的最小日期
    }
};
var endTime = {
    elem: '#endTime',
    format: 'YYYY-MM-DD',
    min: laydate.now(),
    max: laydate.now(),
    istime: true,
    istoday: true,
    fixed: false,
    choose: function (datas) {
        //        startTime.max = datas; //结束日选好后，重置开始日的最大日期
        endV = datas;
    }
};

laydate(startTime);
laydate(endTime);

//时间选择器
var startVs = '';
var endVs = '';
laydate.skin('danlan');
var startTimes = {
    elem: '#startTimes',
    format: 'YYYY-MM-DD',
    min: '1997-01-01', //设定最小日期为当前日期
    max: '2099-06-16', //最大日期
    istime: true,
    istoday: true,
    fixed: false,
    choose: function (datas) {
        startVs = datas;
        endTimes.min = datas; //开始日选好后，重置结束日的最小日期
        setQgData($('#barTypes').parent().parent(), 1);
    }
};
var endTimes = {
    elem: '#endTimes',
    format: 'YYYY-MM-DD',
    min: laydate.now(),
    max: laydate.now(),
    istime: true,
    istoday: true,
    fixed: false,
    choose: function (datas) {
        //        startTime.max = datas; //结束日选好后，重置开始日的最大日期
        endVs = datas;
        setQgData($('#barTypes').parent().parent(), 1);
    }
};

//laydate(startTimes);
//laydate(endTimes);

//点击时间选择器的时候更改样式
$('#endTime').on('click', function () {
    dateCss();
})

$('#end').on('click', function () {
    dateCss();
})


//更改日期插件的样式
function dateCss() {
    var arr = $('#laydate_box').attr('style').split(';');
    var cssStr =
        'position:absolute;right:0;';
    for (var i = 0; i < arr.length; i++) {
        if (arr[i].indexOf('top') != -1) {
            cssStr += arr[i];
        }
    }

    $('#laydate_box').attr('style', cssStr);
}

/* =========================时间选择器结束============================*/

/* =========================核心查询图表============================*/
var myChart4 = echarts.init(document.getElementById('chart4'));

//xAxis
function chart4() {
    // 基于准备好的dom，初始化echarts实例
    myChart4.clear();
    option = {
        tooltip: {
            trigger: 'axis'
        },
        toolbox: {
            show: true,
            feature: {
                mark: {show: true},
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        dataZoom: {
            zoomOnMouseWheel: true,
            moveOnMouseMove: true,
            type: 'slider',
            //type:'inside',
            xAxisIndex: 0,
            filterMode: 'weakFilter',
            height: 20,
            bottom: 0,
            start: 0,
            end: 26,
            handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
            handleSize: '80%',
            show: true,
            realtime: true,
            y: '90%',
            height: 20,
            //backgroundColor: '#5F9EA0',
            dataBackgroundColor: 'rgb(0,0,0,0)',
            //fillerColor: '#00008B',
            //handleColor: '#00008B',
            textStyle: {
                color: '#fff',
            },
            start: 0,
            end: 100
        },
        color: ['#00008B', '#4169E1', '#5F9EA0', '#8A2BE2', '#44AFF0', '#4E82FF', '#584BFF', '#BE4DFF', '#F845F1'],
        calculable: true,
        legend: {
            data: ['开卡数', '贷款数', '存款数'],
            textStyle: {
                color: '#fff'
            },
        },
        xAxis: [
            {
                axisLine: {
                    lineStyle: {
                        color: '#fff'
                    }
                },
                splitLine: {
                    show: false
                },
                type: 'category',
                data: ['2009年', '2010年', '2011年', '2012年', '2013年', '2014年', '2015年', '2016年', '2017年', '2018年', '2019年']
            }
        ],
        yAxis: [
            {

                splitLine: {
                    show: false,
                },
                axisLine: {
                    lineStyle: {
                        color: '#fff'
                    }
                },
                type: 'value',
                name: '张',
                axisLabel: {}
            }
        ],
        series: [
            /*
            {

                name:'广州市',
                type:'bar',
                data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: "#00FFE3"
                        },
                        {
                            offset: 1,
                            color: "#4693EC"
                        }
                        ])
                    }
                },
            } */
        ]
    };
    myChart4.setOption(option);
}

// 3D版本的柱形图，如果需要使用将函数名改为chart4即可
function chart4x() {

    option = {
        tooltip: {},
        visualMap: {
            show: false,
            max: 15,
            inRange: {
                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
            }
        },
        xAxis3D: {
            name: '',
            nameGap: 1,
            type: 'category',
            data: ['2009年', '2010年', '2011年', '2012年', '2013年', '2014年', '2015年', '2016年', '2017年', '2018年', '2019年']
        },
        yAxis3D: {
            name: '',
            type: 'category',
            data: ['开卡数', '贷款书', '存款数', '中间收入']
        },
        zAxis3D: {
            name: '',
            type: 'value'
        },
        grid3D: {
            show: true,//是否显示三维迪卡尔坐标
            boxWidth: 200,//三维场景高度
            // boxHeight:200,//三维场景高度
            boxDepth: 100,//三维笛卡尔坐标系组件在三维场景中的深度。
            axisLine: {//坐标轴轴线(线)控制
                show: true,//该参数需设为true
                // interval:200,//x,y坐标轴刻度标签的显示间隔，在类目轴中有效。
                lineStyle: {//坐标轴样式
                    color: 'red',
                    opacity: 1,//(单个刻度不会受影响)
                    width: 2//线条宽度
                }
            }
        },
        series: [{
            name: '广州',
            type: 'bar3D',
            data: [[0, 0, 12], [1, 0, 11], [2, 0, 3], [3, 0, 15], [4, 0, 13], [5, 0, 11], [6, 0, 7], [7, 0, 18], [8, 0, 12], [9, 0, 15], [10, 0, 6],
                [0, 1, 12], [1, 1, 11], [2, 1, 3], [3, 1, 15], [4, 1, 13], [5, 1, 11], [6, 1, 7], [7, 1, 18], [8, 1, 12], [9, 1, 15], [10, 1, 6],
                [0, 2, 12], [1, 2, 11], [2, 2, 3], [3, 2, 15], [4, 2, 13], [5, 2, 11], [6, 2, 7], [7, 2, 11], [8, 2, 12], [9, 2, 15], [10, 2, 6],
                [0, 3, 4], [1, 3, 5], [2, 3, 13], [3, 3, 5], [4, 3, 7], [5, 3, 6], [6, 3, 16], [7, 3, 8], [8, 3, 12], [9, 3, 15], [10, 3, 6]],
            shading: 'lambert',
            stack: 'stack',
            label: {
                textStyle: {
                    fontSize: 16,
                    borderWidth: 1
                }
            },
            emphasis: {
                label: {
                    textStyle: {
                        fontSize: 20,
                    }
                },
            }
        },
            {
                name: '深圳',
                type: 'bar3D',
                stack: 'stack',
                data: [[0, 0, 12], [1, 0, 11], [2, 0, 3], [3, 0, 15], [4, 0, 13], [5, 0, 11], [6, 0, 7], [7, 0, 18], [8, 0, 12], [9, 0, 15], [10, 0, 6],
                    [0, 1, 12], [1, 1, 11], [2, 1, 3], [3, 1, 15], [4, 1, 13], [5, 1, 11], [6, 1, 7], [7, 1, 18], [8, 1, 12], [9, 1, 15], [10, 1, 6],
                    [0, 2, 12], [1, 2, 11], [2, 2, 3], [3, 2, 15], [4, 2, 13], [5, 2, 11], [6, 2, 7], [7, 2, 11], [8, 2, 12], [9, 2, 15], [10, 2, 6],
                    [0, 3, 4], [1, 3, 5], [2, 3, 13], [3, 3, 5], [4, 3, 7], [5, 3, 6], [6, 3, 16], [7, 3, 8], [8, 3, 12], [9, 3, 15], [10, 3, 6]],
                shading: 'lambert',
                label: {
                    textStyle: {
                        fontSize: 16,
                        borderWidth: 1
                    }
                },
                emphasis: {
                    label: {
                        textStyle: {
                            fontSize: 20,
                        }
                    },
                }
            }
        ]
    }
    myChart4.setOption(option);

}

chart4('');


/*==================数据获取的地方==================*/
/*横坐标参数，年月日信息
其中年和月静态，日由函数getday()动态获取*/
var year = ['2009年', '2010年', '2011年', '2012年', '2013年', '2014年', '2015年', '2016年', '2017年', '2018年', '2019年']
var month = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];
var day = [];

//计算一个月有多少天
function getday(params) {
    var list = [];
    if (params.indexOf('1') != -1 || params.indexOf('3') != -1 ||
        params.indexOf('5') != -1 || params.indexOf('7') != -1 ||
        params.indexOf('8') != -1 || params.indexOf('10') != -1 ||
        params.indexOf('12') != -1) {
        for (var i = 1; i <= 31; i++) {
            list.push(i + '号');
        }
        return list;
    } else if (params.indexOf('2') != -1) {//2月

        if (((curyear % 4 == 0) && (curyear % 100 != 0)) || (curyear % 400 == 0)) {
            for (var i = 1; i <= 29; i++) {
                list.push(i + '号');
            }

        } else {
            for (var i = 1; i <= 28; i++) {
                list.push(i + '号');
            }
        }
        return list;
    } else {
        for (var i = 1; i <= 30; i++) {
            list.push(i + '号');
        }
        return list;
    }
    return list;
};


/*纵坐标参数，测试的时候数据为静态，动态化给一下变量进行赋值即可
主要接收的json数据格式
var jasondata =
[
    {
        {
            {
                {},{},{},{} 4中业务数据
            },{},{}...{} 29/30/31天
        },{},{}...{} 12个月
    },{},{}...{} 1997-2019
    ]*/


/*===========================数据获取结束============================*/
/*滑动监听事件*/
myChart4.on('datazoom', function (params) {
    var options = myChart4.getOption();
    var startValue = options.dataZoom[0].startValue;
    var endValue = options.dataZoom[0].endValue;

    var refleshXAxisData = [];
    var refleshSeriesData = [];
    if (endValue - startValue == 0) { //滑动到只有一个数据
        var dataIndex = options.xAxis[0].data;
        if (dataIndex[0].indexOf('年') != -1) { //在年里面
            curyear = 2009 + startValue;
        } else if (dataIndex[0].indexOf('月') != -1) { //在月里面
            options.dataZoom[0].start = 0;
            options.dataZoom[0].end = 100;

        }
    }
})

// 双击跳到上一层  号--月--年
$('#chart4').on('dblclick', function (params) {
    var options = myChart4.getOption();
    var dataIndex = options.xAxis[0].data;

    if (dataIndex != null) {
        if (dataIndex[0].indexOf('号') != -1) {
            //curyear 当前年
            options.xAxis[0].data = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];
            for (var i = 0; i < selectedCity.length; i++) {
                options.series[i].data = getmonth(
                    selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行',
                    curyear);

            }

            options.dataZoom[0].start = 0;
            options.dataZoom[0].end = 100;
            myChart4.clear();
            myChart4.setOption(options)
        }
        if (dataIndex[0].indexOf('月') != -1) {
            options.xAxis[0].data = year;
            for (var i = 0; i < selectedCity.length; i++) {
                options.series[i].data = getyear(
                    selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行');

            }
            options.dataZoom[0].start = 0;
            options.dataZoom[0].end = 100;
            myChart4.clear();
            myChart4.setOption(options)
        }
    }
});

var selectedCity = [];
var clickMonth;

/*实现点击进入具体某一年或者某一月的功能*/
myChart4.getZr().on('click', params => {
    // console.log(params);
    //console.log(selectedCity);
    const pointInPixel = [params.offsetX, params.offsetY];
    if (myChart4.containPixel('grid', pointInPixel)) {
        let xIndex = myChart4.convertFromPixel({seriesIndex: 0}, [params.offsetX, params.offsetY])[0];
        /*事件处理代码书写位置*/
        if (xIndex != null) {
            var options = myChart4.getOption();
            var dataIndex = options.xAxis[0].data;

            /*如果是某一天的图形点击事件*/
            if (dataIndex[0].indexOf('号') != -1) {

            } //点击*月  进入日
            else if (dataIndex[0].indexOf('月') != -1) {
                // 获取当前点击月份 进入了clickMonth月
                clickMonth = xIndex + 1;

                //console.log(curyear)
                options.xAxis[0].data = getday(clickMonth + '月');
                for (var i = 0; i < selectedCity.length; i++) {

                    options.series[i].data = getmonthcount(
                        selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行',
                        curyear, clickMonth);

                }
                options.dataZoom[0].start = 0;
                options.dataZoom[0].end = 100;
                myChart4.clear();
                myChart4.setOption(options)
            } else {
                // 获取当前点击年份
                //var clickMonth = xIndex + 1997;
                curyear = xIndex + 2009;

                options.xAxis[0].data = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];


                for (var i = 0; i < selectedCity.length; i++) {
                    options.series[i].data = getmonth(
                        selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行',
                        curyear);
                }
                console.log(options.series);
                options.dataZoom[0].start = 0;
                options.dataZoom[0].end = 100;
                myChart4.clear();
                myChart4.setOption(options)
            }
        }

    }
});
/*
myChart3.dispatchAction({
    type: 'selectDataRange',        //选取映射的数值范围。
    //visualMapIndex: number,         // 可选，visualMap 组件的 index，多个 visualMap 组件时有用，默认为 0
    // 连续型 visualMap 和 离散型 visualMap 不一样
    // 连续型的是一个表示数值范围的数组。selected: [20, 40],
    // 离散型的是一个对象，键值是类目或者分段的索引。值是 `true`, `false`,例如：selected: { 1: false }// 取消选中第二段, selected: { '优': false }// 取消选中类目 `优`
    selected: Object|Array
});
*/
var arealist = [];//用来存放地点list 的array
//--------------------------------------------------------------------------------------------------
//点击地图中的一个地方，发送第一次发送一个post请求，
//测试用
//arealist.push(testdata);
//arealist.push(testdata2);
var area = '';//发送post请求时候的地点参数
var flag = '0' //判断arealist中是否有刚刚点击的地点数据的标志

//发送post请求的方法
var wait = function () {
    var defer = $.Deferred();
    $.ajax({
        type: 'post',
        contentType: "application/x-www-form-urlencoded",
        dataType: 'json',
        url: 'http://localhost:9000/getdata',
        data: {bankname: area},
        success: function (res) {
            defer.resolve(res);
        }
    });
    return defer.promise();
};


//得到某一年，某个月，日的集合  city：**分行
function getmonthcount(city, year, month) { //year：2009  month：6
    year = year + '年'
    month = month + '月'
    var array = [];
    var templist = cachicatch(city); //x

    for (var i = 0; i < templist.data.length; i++) {
        if (templist.data[i].time == year) {
            templist = templist.data[i];
        }
    }
    //console.log(templist)
    for (var i = 0; i < templist.data.length; i++) {
        if (templist.data[i].time == month) {
            templist = templist.data[i];
        }
    }
    //console.log(templist.data)
    return templist.data;
}

//得到一个集合的和
function arraysum(arr) {
    var sum = 0;
    for (var i = 0; i < arr.length; i++) {
        sum += arr[i];
    }
    return sum;
}

//得到某个地区某一年的集合(月的集合)
function getmonth(city, year) {
    year = year + '年'

    var array = [];
    var templist = cachicatch(city);
    for (var i = 0; i < templist.data.length; i++) {
        if (templist.data[i].time == year) {
            templist = templist.data[i];
        }
    }

    for (var i = 0; i < templist.data.length; i++) {
        array[i] = arraysum(templist.data[i].data);

    }
    return array;

}

//得到某个地区的集合(2009-2019)
function getyear(city) {

    var array = [];
    var array1 = [];
    var templist = cachicatch(city);
    for (var i = 0; i < templist.data.length; i++) {
        array1[i] = templist.data[i].time.slice(0, name.length - 1);
    }
    for (var i = 0; i < templist.data.length; i++) {
        array[i] = arraysum(getmonth(city, array1[i]))

    }
    return array;
}


function parsearea(name) {
    name = name.slice(0, name.length - 1);
    name = name + '分行';
    return name;
}

//返回bankname为area的整个list
function cachicatch(city) {

    for (var i = 0; i < arealist.length; i++) {
        if (arealist[i].bankname == city) {
            return arealist[i];
        }

    }
}

/*获取选择的地点，并赋予到查询表的图例中*/
myChart3.on('mapselectchanged', function (params) {
    selectedCity = []; // 清空数组  被选中的城市集合
    //赋上地点变量
    area = params.batch[0].name;
    area = parsearea(area);
    console.log(area);
    $.when(wait()).done(function (res) {
        if (arealist.length == 0) {
            arealist.push(res);

        } else {
            //判断area是不是在arealist中
            for (var i = 0; i < arealist.length; i++) {
                if (arealist[i].bankname == area) {
                    flag = '1'
                    break;
                }
            }
            if (flag == '0') {
                arealist.push(res);
            }
            flag = '0';//重置
        }

        var citys = params.batch[0].selected;//全部城市:true/false
        var keys = Object.keys(citys);//全部城市名
        for (var i = 0; i < keys.length; i++) {
            if (citys[keys[i]] == true) {
                selectedCity.push(keys[i]);//被选中的城市集合
            }
        }
        //clickMonth
        var options = myChart4.getOption();
        options.legend[0].data = selectedCity;
        // 加载数据
        var dataIndex = options.xAxis[0].data;
        options.series = []; // 先清空
        if (dataIndex[0].indexOf('号') != -1) {
            //点进来在日里面
            for (var i = 0; i < selectedCity.length; i++) {
                options.series.push({name: '', type: '', data: ''});
                options.series[i].name = selectedCity[i];
                options.series[i].type = 'bar';
                options.series[i].data = getmonthcount(
                    selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行',
                    curyear, clickMonth);
            }
            //点进来在月里面
        } else if (dataIndex[0].indexOf('月') != -1) {
            for (var i = 0; i < selectedCity.length; i++) {
                options.series.push({name: '', type: '', data: ''});
                options.series[i].name = selectedCity[i];
                options.series[i].type = 'bar';

                options.series[i].data = getmonth(
                    selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行',
                    curyear);
            }
        } else {//点进来在年里面
            for (var i = 0; i < selectedCity.length; i++) {
                options.series.push({name: '', type: '', data: ''});
                options.series[i].name = selectedCity[i];
                options.series[i].type = 'bar';
                options.series[i].data = getyear(selectedCity[i].slice(0, selectedCity[i].length - 1) + '分行');
            }
        }
        myChart4.clear();
        myChart4.setOption(options);
    });
});

/*点击方法区域*/
$('.close-pop').on('click', function () {
    $(this).parent().parent().hide();
    $('.pop-up1').attr('style', 'visibility: hidden');
    $('#pages-div').attr('style', 'visibility: hidden');
});
// 分析界面标题 点击放大
$('#title1').on('click', function () {
    $('.container').attr('style', 'visibility: visible').find('.pop-up').eq(0).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
    $('#filCon').hide();
});
// 预测界面标题点击放大
$('#title2').on('click', function () {
    $('.container').attr('style', 'visibility: visible').find('.pop-up').eq(1).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
});
// 查询历史标题 点击放大
$('#tohistory').on('click', function () {
    $('.container').attr('style', 'visibility: visible').find('.pop-up').eq(2).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
});
// 地图界面放大
$("#tobigmap").on('click', function () {
    $('.container').attr('style', 'visibility: visible').find('.pop-up').eq(3).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
});
$('#pre_plan_btn').on('click', function () {
    $('.container').attr('style', 'visibility: visible').find('.pop-up').eq(4).attr('style', 'visibility: visible').siblings().attr('style', 'visibility: hidden');
});

// 查询历史放大图表
var historychat = echarts.init(document.getElementById('historychat'));

function chart_history() {
    historychat.clear();
    option = {
        title: {
            text: '统计信息',
            x: 'center'
        },
        tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            x: 'center',
            y: 'bottom',
            data: ['查询', '分析', '预测']
        },
        toolbox: {
            show: true,
            feature: {
                mark: {show: true},
                magicType: {
                    show: true,
                    type: ['pie', 'funnel']
                },
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        calculable: true,
        series: [
            {
                name: '占比',
                type: 'pie',
                radius: [30, 110],
                //center : ['75%', 200],
                roseType: 'area',
                //x: '50%',               // for funnel
                sort: 'ascending',     // for funnel
                data: [
                    {value: 10, name: '查询'},
                    {value: 5, name: '分析'},
                    {value: 15, name: '预测'}
                ]
            }
        ]
    };
    historychat.setOption(option);
}

chart_history();

$('.savehistory').on('click', function () {
    $(".table3").table2excel({
        exclude: ".excludeThisClass",
        name: "查询历史",
        filename: "history" //do not include extension
    });
})


// 业务预测放大界面
// 计划指定按钮
// $('#pre_plan_btn').on('click', function () {
//     $('.pre-right1').attr('style', 'visibility: visible');
//     $('#pre_plan_btn').attr('style', 'visibility: hidden');
//     $('.pre-right1').attr('style', 'visibility: visible');
//     $('.pre-right2').attr('style', 'visibility: hidden');
// })
//
//
// $('#pre_ana_btn').on('click', function () {
//     $('.pre-right1').attr('style', 'visibility: hidden');
//     $('.pre-right2').attr('style', 'visibility: visible');
//     $('#pre_ana_btn').attr('style', 'visibility: hidden');
//     $('#pre_plan_btn').attr('style', 'visibility: visible');
//
// })

var gd_city = [
    {
        name: '广州市',
        value: 0
    },
    {
        name: '韶关市',
        value: 0
    },
    {
        name: '深圳市',
        value: 0
    },
    {
        name: '珠海市',
        value: 0.0
    },
    {
        name: '汕头市',
        value: 0.0
    },
    {
        name: '佛山市',
        value: 0.0
    },
    {
        name: '江门市',
        value: 0.0
    },
    {
        name: '湛江市',
        value: 0.0
    },
    {
        name: '茂名市',
        value: 0.0
    },
    {
        name: '肇庆市',
        value: 0.0
    },
    {
        name: '惠州市',
        value: 0.0
    },
    {
        name: '梅州市',
        value: 0.0
    },
    {
        name: '汕尾市',
        value: 0.0
    },
    {
        name: '河源市',
        value: 0.0
    },
    {
        name: '阳江市',
        value: 0.0
    },
    {
        name: '清远市',
        value: 0.0
    },
    {
        name: '东莞市',
        value: 0
    },
    {
        name: '中山市',
        value: 0.0
    },
    {
        name: '潮州市',
        value: 0.0
    },
    {
        name: '揭阳市',
        value: 0.0
    },
    {
        name: '云浮市',
        value: 0.0
    }]

//变色
var pre_unit_choose;
var pre_city_choose;
$('#1mon').on('click', function () {
    pre_unit_choose = 0;
    $('#1mon').attr("style", "background-color: #b104ff;")
    $('#3mon').attr("style", "")
    $('#12mon').attr("style", "")
})
$('#3mon').on('click', function () {
    pre_unit_choose = 1;
    $('#1mon').attr("style", "")
    $('#3mon').attr("style", "background-color: #b104ff;")
    $('#12mon').attr("style", "")
})
$('#12mon').on('click', function () {
    pre_unit_choose = 2;
    $('#1mon').attr("style", "")
    $('#3mon').attr("style", "")
    $('#12mon').attr("style", "background-color: #b104ff;")
})

function plan_getmon(i) {
    var date = new Date();
    var year = date.getFullYear();
    var mon = date.getMonth();
    return parseInt(year + (mon + i) / 12) + '年 ' + (((mon + i) % 12) + 1) + '月';
    ;
}

function plan_getyear() {
    var date = new Date();
    var year = date.getFullYear();
    return year;
}

function plan_getseason(i) {
    var date = new Date();
    var year = date.getFullYear();
    var mon = date.getMonth();
    var season;
    if (mon == 1 || mon == 2 || mon == 3) {
        season = 1;
    } else if (mon == 4 || mon == 5 || mon == 6) {
        season = 2;
    } else if (mon == 7 || mon == 8 || mon == 9) {
        season = 3;
    } else {
        season = 4;
    }
    return parseInt(year + (season + i) / 4) + '年 ' + (((season + i) % 4) + 1) + '季度';
}

// 动态添加 时间配置
function draw_config() {
    $('.detail-container').empty();
    if (pre_unit_choose == 0) {
        for (var i = 0; i < $('#pre_period').val(); i++) {
            $('.detail-container').append('<div style="width:100%" class="pre_citybox">\n' +
                '                    <p ><span>' + plan_getmon(i) + '：</span></p>\n' +
                '                    <input id="' + pre_city_choose + plan_getmon(i) + '_input">\n' +
                '                </div>')
        }
    } else if (pre_unit_choose == 1) {
        for (var i = 0; i < $('#pre_period').val(); i++) {
            $('.detail-container').append('<div style="width:100%" class="pre_citybox">\n' +
                '                    <p ><span>' + plan_getseason(i) + '：</span></p>\n' +
                '                    <input id="' + pre_city_choose + plan_getseason(i) + '_input">\n' +
                '                </div>')
        }
    } else {
        for (var i = 0; i < $('#pre_period').val(); i++) {
            $('.detail-container').append('<div style="width:100%" class="pre_citybox">\n' +
                '                    <p ><span>' + (plan_getyear() + i) + '年：</span></p>\n' +
                '                    <input id="' + pre_city_choose + (plan_getyear() + i) + '_input">\n' +
                '                </div>')
        }
    }
    $('.detail-container').find("input").eq($('#pre_period').val() - 1).attr('readonly', 'readonly');
}

function get_gd_city_data(id) {
    var temp = [];
    for (var i = 0; i < gd_city.length; i++) {
        if (gd_city[i].name == id) {
            temp = gd_city[i].value;
        }
    }
    for (var i = 0; i < $('#pre_period').val(); i++) {
        $('.detail-container').find('input').eq(i).val(temp[i]);
    }
}

function randomNum(minNum, maxNum) {
    return (Math.random() * (maxNum - minNum) + minNum).toFixed(2);

}

//根据占比进行分配
function main_all() {
    var target = $('#广州target').val();
    // 测试的时候默认生成随机占比数组!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    var zhanbi = [1];
    for (var i = 1; i <= gd_city.length; i++) {
        zhanbi.push(randomNum(0.01, 1.5));
        $('.city-container').find('input').eq(i - 1).val((target * zhanbi[i]).toFixed(2));
    }
    for (var i = 0; i < gd_city.length; i++) {
        var temp = [];
        var target_temp = target * zhanbi[i];
        // 这里需要获取上一年，季度，月的数据！！！！！！！！！！！！！！！！！！！!!!!!!
        var test_mon = 5000;
        var gap = ((target_temp - test_mon) / $('#pre_period').val()).toFixed(2);
        for (var j = 0; j < $('#pre_period').val(); j++) {
            temp.push(test_mon + gap * (j + 1));
        }
        gd_city[i].value = temp;
    }
}

// 动态添加
// 默认预测4
$('#pre_period').val(4);
$('#gz_click').on('click', function () {
    if (pre_unit_choose != 0 && pre_unit_choose != 1 && pre_unit_choose != 2) {
        alert("请选择预测单位");
    } else {
        $('#pages-div').attr('style', 'visibility: visible');
        $('#pre_period').on('click', function () {
            draw_config();
            main_all();
            get_gd_city_data('广州市');
        });
        $('.container2').attr('style', 'visibility: visible').find('.pop-up1').eq(0).attr('style', 'visibility: visible');
        $('.pop-up1').find('h2').eq(0).text('广州计划配置');
        pre_city_choose = '广州市';
        draw_config();
        get_gd_city_data('广州市');
        $('.detail-container input').on('blur', function () {
            for (var i = 0; i < gd_city.length; i++) {
                if (gd_city[i].name == pre_city_choose) {
                    var temp = []
                    for (var j = 0; j < $('#pre_period').val(); j++) {
                        temp.push($('.detail-container').find('input').eq(j).val());
                    }
                    gd_city[i].value = temp;
                }
            }
        });
    }
})


// 动态添加 城市配置
$('#pre_all_btn').on('click', function () {
    if ($('#广州target').val() == '') {
        alert("智能分配根据省会计划进行同比分配，请添加省会计划");
    } else if (pre_unit_choose != 0 && pre_unit_choose != 1 && pre_unit_choose != 2) {
        alert("请选择预测单位");
    } else if (typeof ($('#pre_period').val()) == 'undefined') {
        alert("请进入广州市配置界面设置时长");
    } else {
        $('.city-container').empty();
        for (var i = 1; i < gd_city.length; i++) {
            $('.city-container').append('<div class="pre_citybox">\n' +
                '                    <p style="cursor: pointer" id="' + gd_city[i].name + '_p"><span>' + gd_city[i].name + '：</span></p>\n' +
                '                    <input id="' + gd_city[i].name + '_input">\n' +
                '                </div>');
            // 添加点击事件
            $('#' + gd_city[i].name + '_p').on('click', function (res) {
                $('#pages-div').attr('style', 'visibility: hidden');
                $('.container2').attr('style', 'visibility: visible').find('.pop-up1').eq(0).attr('style', 'visibility: visible');
                $('.pop-up1').find('h2').eq(0).text(res.currentTarget.innerText.slice(0, -2) + '分行计划配置');
                pre_city_choose = res.currentTarget.innerText.slice(0, -1);
                draw_config();
                get_gd_city_data(pre_city_choose);
                $('.detail-container input').on('blur', function () {
                    for (var i = 0; i < gd_city.length; i++) {
                        if (gd_city[i].name == pre_city_choose) {
                            var temp = []
                            for (var j = 0; j < $('#pre_period').val(); j++) {
                                temp.push($('.detail-container').find('input').eq(j).val());
                            }
                            gd_city[i].value = temp;
                        }
                    }
                });
            });

        }
    }
    main_all();
});


// websocket 相关代码
// 默认加载websocket服务
//websocket 全局变量
var stompClient;
function connect() {
    var socket= new SockJS('http://localhost:9000/socket');
    stompClient = Stomp.over(socket);
    stompClient.connect({id:randomId(true,8,16)}, function (frame) {
        console.log('Connected:' + frame);
        // 订阅hello事件
        stompClient.subscribe('/topic/say', function (response) {
            showResponse(JSON.parse(response.body).responseMessage);
        });
        // 订阅定时任务
        stompClient.subscribe('/topic/callback', function (response) {
            console.log(response);
            showCallback(response.body);
        });
    });
}


$(window).on('unload', function () {
    if (stompClient != null) {
        stompClient.disconnect();
    }
    console.log('Disconnected');
});

function showResponse(message) {
    console.log(message);
    //$("#").html(message);
}

function showCallback(message) {
    console.log(message);
    //$("#").html(message);
}
/*
** randomId 产生任意长度随机字母数字组合作为用户 ID
** randomFlag-是否任意长度 min-任意长度最小位[固定位数] max-任意长度最大位
*/

function randomId(randomFlag, min, max){
    var str = "",
        range = min,
        arr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

    // 随机产生
    if(randomFlag){
        range = Math.round(Math.random() * (max-min)) + min;
    }
    for(var i=0; i<range; i++){
        pos = Math.round(Math.random() * (arr.length-1));
        str += arr[pos];
    }
    return str;
}
 
 
